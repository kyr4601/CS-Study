# MAC(Media Access Control)이란?

    네트워크 장비가 데이터를 교환하는 데 사용되는 고유한 식별자

## MAC의 특징

- 6바이트(48비트)의 길이를 가지며, 이는 전 세계적으로 고유한 값이다. 이 주소는 보통 12자리의 16진수로 표현되며, 예를 들어 '00:0a:95:9d:68:16'와 같은 형태를 가진다.

- 첫 6자리는 '제조사 코드'이고, 이는 각 네트워크 장비 제조사에게 할당된 고유한 값이다. 이를 OUI(Organizationally Unique Identifier)라고도 부른다. 뒤의 6자리는 '일련번호'로, 이는 제조사가 장비를 생산할 때마다 고유하게 부여하는 값이다.

- 네트워크에서 데이터 패킷을 전송할 때, 패킷의 헤더에는 목적지와 출발지의 MAC 주소가 포함된다. 이렇게 하면 네트워크 내의 장비들이 데이터를 정확하게 전송하고 받을 수 있다.

- 장비의 하드웨어에 내장되어 있으므로, 장비가 변경되지 않는 한 일반적으로 변경되지 않는다. 이는 IP 주소와는 대조적인 특징이다. IP 주소는 네트워크 상황에 따라 변경될 수 있다.

### MAC 주소 스푸핑
- 네트워크 장비의 실제 MAC 주소를 다른 MAC 주소로 변경하는 행위
- 공격자는 네트워크에서 허용된 장비의 MAC 주소를 알아낸다. 그런 다음, 공격자는 자신의 장비의 MAC 주소를 그 주소로 변경한다. 이렇게 하면, 네트워크는 공격자의 장비를 허용된 장비로 인식하게 된다.

- 해결법

    - MAC 주소 필터링

        - 특정 MAC 주소를 가진 장비만 네트워크에 접근하도록 허용하거나, 특정 MAC 주소를 가진 장비의 접근을 차단하는 방법이다. 이 기법은 네트워크에 접근할 수 있는 장비를 제한하여 보안을 강화하는 데 사용된다.

<br>

# ARP(Address Resolution Protocol)이란?

    주소 결정 프로토콜로 불리고, IP주소(논리적 주소)를 Mac주소(물리적 주소)로 대응하기 위해 만들어진 프로토콜.

## 등장 배경

IP주소만으로 통신할 수 없고, 긴 Mac주소를 모두 기억하기엔 리소스 낭비가 있기 때문에 IP주소를 알면 Mac주소를 추적할 수 있는 ARP가 만들어짐

## ARP 과정

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbZOLKN%2Fbtrbe5RJ1V1%2FuG1SaSLuhJKlDAPCt6ajKK%2Fimg.png" width="700" height="400">

<br>

1. PC-A => Laptop-A

    - 자신의 Mac/IP주소와 목적지 IP주소를 패킷에 담고 목적지 MAC주소를 FF-FF-FF-FF-FF-FF로 설정하여 브로드캐스트 요청을 한다.

    |Source MAC|Source IP|Destination MAC|Destination IP|
    |---|---|---|---|
    |00-0A-0B-0C-00-00|192.168.1.1|FF-FF-FF-FF-FF-FF|192.168.1.4|

2. Switch-A 
    - Switch는 이 요청을 받고 자신의 테이블에 PC-A의 MAC주소를 저장한다. 만약 Laptop-A의 Mac주소가 없을 경우 브로드캐스트를 진행한다.

3. PC-B, PC-C

    - PC-B, PC-C는 브로드캐스트를 받고 목적지 MAC이 자신이 아니라면 폐기처리한다.

4. Laptop-A => PC-A

    - Laptop-A는 목적지 MAC이 자신인 걸 확인하고 다음과 같은 ARP-Reply 패킷을 보낸다.

    |Source MAC|Source IP|Destination MAC|Destination IP|
    |---|---|---|---|
    |00-2B-3B-4A-11-11|192.168.1.4|00-0A-0B-0C-00-00|192.168.1.1|

5. Switch-A

    - Switch는 Laptop-A의 MAC주소를 테이블에 기록하고 PC-A에 전달한다.

6. PC-A와 Laptop-A

    - 서로의 IP,MAC 주소를 파악했으므로 통신 가능

## 네트워크 스위치

    네트워크 내의 트래픽을 MAC 주소를 기반으로 효율적으로 전송하며, 여러 장치들을 연결하여 통신이 가능하도록 하는 네트워크 장비

### 특징

1. MAC 주소 기반 전송

    스위치는 연결된 각 장치의 MAC(Media Access Control) 주소를 학습하고 이를 기반으로 정보를 전달한다. 장치가 데이터를 보내면, 스위치는 이 데이터의 출발지 MAC 주소를 확인하고 MAC 주소 테이블에 저장한다. 이후 같은 MAC 주소를 가진 장치로 데이터가 오면, 스위치는 이 데이터를 해당 장치로 바로 전송한다.

2. 프레임 스위칭

    스위치는 네트워크 프레임을 받아 목적지 MAC 주소에 해당하는 포트로 전달한다. 이는 네트워크의 효율성을 높이고, 데이터 충돌을 최소화하는 데 도움이 된다.

3. 네트워크 세분화

     충돌 도메인은 스위치나 허브 등의 네트워크 장치에 의해 결정된다. 스위치를 통해 네트워크를 세분화하면, 한 세그먼트에서 데이터 충돌이 발생해도 다른 세그먼트에는 영향을 미치지 않아 전체 네트워크의 성능 저하를 방지할 수 있다.

    - 충돌 도메인이란?

            네트워크에서 데이터 패킷이 동시에 전송될 때 발생할 수 있는 '충돌'이 발생할 수 있는 영역을 의미한다.

4. 풀 더플렉스 통신(전이중 통신)

    스위치는 풀 더플렉스 통신을 지원하여, 동시에 데이터를 송수신 할 수 있다.

    - 통신 방식 종류

    <img src="https://user-images.githubusercontent.com/85394884/206549483-66fb5147-6886-4293-87d3-627be8cfe67e.png" width="700" height="400">

## Physical Layer(물리 계층)

### 물리 계층이란?

    물리 계층은 네트워크의 실제 데이터 전송을 담당하며, 비트 단위의 정보를 전기적 신호로 변환해 네트워크 장비들 간에 전송하는 역할을 합니다.

### 구성 기기

- NIC(Network Interface Card)

    네트워크에 연결하기 위한 하드웨어로, USB 포트와 연결하는 USB 타입, 마더 보드에 내장되어 있는 온보드 타입 등이 있습니다. 모든 네트워크 단말은 애플리케이션과 운영체제가 처리한 패킷을 NIC를 이용해 LAN 케이블이나 전파로 보냅니다.

- 리피터(repeater)

    전송 거리가 길면 파형이 훼손됩니다. 이러한 훼손된 파형을 증폭해 정돈한 뒤 다른 쪽으로 전송하는 기기입니다.

- 리피터 허브(repeater hub) 

    전달받은 패킷의 복사본을 그대로 다른 모든 포트에 전송하는 기기입니다. 이제는 L2 스위치로 대체되어 잘 사용하지 않습니다.

- 미디어 컨버터(media converter)

    전기 신호와 광 신호를 서로 교환하는 기기입니다.

- 액세스 포인트(access point) 

    패킷을 전파로 변조/복조하는 기기로, 무선과 유선 사이의 다리 역할을 합니다.

<br>


# 로드 밸런싱

## 로드 밸런싱이란?

    로드 밸런싱(load balancing)은 네트워크 트래픽이나 애플리케이션 요청을 다수의 서버나 네트워크 경로로 분산시키는 기술이다. 

## 특징

- 시스템의 성능을 향상시키고, 가용성을 높이며, 응답 시간을 줄이는 데 도움이 됩니다.

- 로드 밸런싱은 여러 서버가 동일한 작업을 수행할 수 있도록 설계된 시스템에서 특히 중요

- 하나의 서버에 과도한 부하가 몰리지 않도록, 요청을 여러 서버에 균등하게 분산시킴으로써, 각 서버의 부하를 줄이고 전체 시스템의 가용성을 높이는 역할


## 방법

라운드 로빈(Round Robin)

    요청을 순차적으로 서버에 분배하는 방식.

Least Connections

    현재 가장 적은 수의 연결을 가진 서버에 요청을 보낸다. 각 서버의 부하를 고려하여 분배하는 방식.

IP Hash

    클라이언트의 IP 주소를 해시하여 특정 서버에 요청을 할당하는 방식. 특정 클라이언트 요청을 항상 동일한 서버로 전송하도록 보장한다.

URL Hash: 

    요청의 URL을 해시하여 요청을 서버에 분배하는 방식.

## 면접 질문

Q . ARP 과정 설명

1. 먼저, 송신자는 자신이 보내려는 대상의 IP 주소를 알고 있지만, MAC 주소를 모르는 경우 ARP 요청을 보냅니다. 메시지에는 송신자의 IP와 MAC 주소, 그리고 대상의 IP 주소가 포함되어 있습니다.

2. 메세지는 스위치를 통해 네트워크 상의 모든 디바이스에게 브로드캐스트로 전송됩니다.

3. 모든 디바이스는 이 ARP 요청 메시지를 받지만, 대상 IP 주소가 자신의 IP 주소와 일치하는 디바이스만이 응답하고, 아닌 경우는 드랍합니다.

4. 이 디바이스는 자신의 MAC 주소를 포함한 ARP 응답 메시지를 스위치를 통해 송신자에게 보냅니다.

5. 이 과정에서 스위치는 table에 양 측의 Mac주소를 저장합니다.

5. 송신자는 이 ARP 응답을 받아서 대상의 MAC 주소를 알게 되고, 이를 이용해 데이터를 전송하게 됩니다.

## 참조

https://daengsik.tistory.com/15